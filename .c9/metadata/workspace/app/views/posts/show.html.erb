{"changed":false,"filter":false,"title":"show.html.erb","tooltip":"/app/views/posts/show.html.erb","value":"<html lang=\"ko\">\n  \n  <head>\n    <!--해쉬태그 label의 css-->\n    <style>\n      .label {\n          color: white;\n          padding: 8px;\n          font-family: Arial;\n      }\n      .success {background-color: #4CAF50;} /* Green */\n      .info {background-color: #2196F3;} /* Blue */\n      .warning {background-color: #ff9800;} /* Orange */\n      .danger {background-color: #f44336;} /* Red */ \n      .other {background-color: #e7e7e7; color: black;} /* Gray */ \n    </style>\n    \n    <!--posts/index 에서 가져온거-->\n    <style>\n      .wrap {position: absolute;left: 0;bottom: 40px;width: 288px;height: 132px;margin-left: -144px;text-align: left;overflow: hidden;font-size: 12px;font-family: 'Malgun Gothic', dotum, '돋움', sans-serif;line-height: 1.5;}\n      .wrap * {padding: 0;margin: 0;}\n      .wrap .info {width: 286px;height: 120px;border-radius: 5px;border-bottom: 2px solid #ccc;border-right: 1px solid #ccc;overflow: hidden;background: #fff;}\n      .wrap .info:nth-child(1) {border: 0;box-shadow: 0px 1px 2px #888;}\n      .info .title {padding: 5px 0 0 10px;height: 30px;background: #eee;border-bottom: 1px solid #ddd;font-size: 18px;font-weight: bold;}\n      .info .close {position: absolute;top: 10px;right: 10px;color: #888;width: 17px;height: 17px;background: url('http://t1.daumcdn.net/localimg/localimages/07/mapapidoc/overlay_close.png');}\n      .info .close:hover {cursor: pointer;}\n      .info .body {position: relative;overflow: hidden;}\n      .info .desc {position: relative;margin: 13px 0 0 90px;height: 75px;}\n      .desc .ellipsis {overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}\n      .desc .jibun {font-size: 11px;color: #888;margin-top: -2px;}\n      .info .img {position: absolute;top: 6px;left: 5px;width: 73px;height: 71px;border: 1px solid #ddd;color: #888;overflow: hidden;}\n      .info:after {content: '';position: absolute;margin-left: -12px;left: 50%;bottom: 0;width: 22px;height: 12px;background: url('http://t1.daumcdn.net/localimg/localimages/07/mapapidoc/vertex_white.png')}\n      .info .link {color: #5085BB;}\n      .cafe_td:hover{\n      background-color: #D4E8FF;\n      }\n      \n      </style>\n      \n    <!--정수가 만든거-->\n    <style>\n      .left-content {\n        float: left;\n        width: 60%;\n        margin-right: 30px;\n      }\n      \n      .right-content {\n        float: right;\n        width: 100%;\n        margin-left: 90px;\n      }\n    </style>\n      \n    <!--아래 다음 지도-->\n    \n<script src=\"http://code.jquery.com/jquery-3.3.1.min.js\"></script>\n    \n  \n    <style type=\"text/css\">\n    \n    \n    \n    \ntextarea {\n    resize: none;\n    overflow: hidden;\n    min-height: 50px;\n    max-height: 100px;\n}\n    \n    \n    \n    \n    \n   \n  </style>\n    \n    <title>카침반</title>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\n    <meta name=\"description\" content=\"카페 상세페이지\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    \n    \n    <link rel=\"stylesheet\" href=\"https://www.w3schools.com/w3css/4/w3.css\">\n      <!-- Bootstrap core CSS -->\n    <link href=\"https://blackrockdigital.github.io/startbootstrap-half-slider/vendor/bootstrap/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <!-- Custom styles for this template -->\n    <link href=\"https://blackrockdigital.github.io/startbootstrap-half-slider/css/half-slider.css\" rel=\"stylesheet\">\n  </head>\n  \n  <body>\n    <header style=\"margin-top: 53px;\">\n      <%= render '/layouts/header2' %>\n      \n      \n      <!--1개 카페의 사진들을 담을 array 생성-->\n      \n      \n        <!--그 array에 해당 사진들을 담음 -->\n        <%# @post.pictures.each do |picture| %>\n          <%# cafe_pictures.push(picture) %>\n        <%# end %>\n        \n      <% x = @cafe_pictures.length-1 %>      \n            \n      <div id=\"carouselExampleIndicators\" class=\"carousel slide\" data-ride=\"carousel\">\n       <!--<ol class=\"carousel-indicators\">-->\n       <!--     <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"0\" class=\"active\"></li>-->\n       <!--     <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"<%#= i %>\"></li>-->\n            <!--<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"2\"></li>-->\n       <!--</ol>-->\n        <div class=\"carousel-inner\" role=\"listbox\">\n          <!-- Slide One - Set the background image for this slide in the line below -->\n          <div class=\"carousel-item active\" style=\"background-image: url(<%= @cafe_pictures[0].imgsrc %>)\">\n          </div>\n          <% for i in 1..x do %>\n          <div class=\"carousel-item\" style=\"background-image: url(<%= @cafe_pictures[i].imgsrc %>)\">\n            <div class=\"carousel-caption d-none d-md-block\">\n            </div>\n          </div>\n          <% end %>\n          <!--<ol class=\"carousel-indicators\">-->\n          <!--  <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"0\" class=\"active\"></li>-->\n          <!--  <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"<%#= i %>\"></li>-->\n            <!--<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"2\"></li>-->\n          <!--</ol>-->\n        </div>\n        <a class=\"carousel-control-prev\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"prev\">\n          <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n          <span class=\"sr-only\">이전 사진</span>\n        </a>\n        <a class=\"carousel-control-next\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"next\">\n          <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n          <span class=\"sr-only\">다음 사진</span>\n        </a>\n      </div>\n    </header>\n    <!-- Page Content -->\n    <section class=\"py-5\" style=\"align: center;\">\n      <div class=\"container\" style=\"align: center;\"> \n      \n      <div class=\"left-content\" >\n        \n        <!--카페 이름-->\n        <h2 class=\"w3-center\"><%= @post.title %></h2><br>\n\n        <% @info = '' %>\n        <% @info = \"#노트북 \" if @post.window/(@post.comments.size+1) >= 0.5 %>\n        <% @info += \"#창가공부 \" if @post.laptop/(@post.comments.size+1) >= 0.5 %>\n        <% @info  += \"#팀플 \" if @post.teamplay/(@post.comments.size+1) >= 0.5 %>\n        <% @info += \"#칸막이 \" if @post.wall/(@post.comments.size+1) >= 0.5 %>\n        <% @info += \"#흡연실\" if @post.smoke/(@post.comments.size+1) >= 0.5 %>\n        <strong><%= @info %></strong><br><br>\n\n        \n        \n        <!--<span class=\"label success\">Success</span>-->\n        <!--<span class=\"label info\">Info</span>-->\n        <!--<span class=\"label warning\">Warning</span>-->\n        <!--<span class=\"label danger\">Danger</span>-->\n        <!--<span class=\"label other\">Other</span>-->\n        \n        전화번호: <%= @post.detail.tel %><br>\n        주소: <%= @post.detail.doro %><br>\n        영업시간: <%= @post.detail.time %><br>\n        가격대: <%= @post.detail.price %><br>\n        \n        <hr>\n        콘센트 지수: <%= @post.consent %><br>\n        <% if @post.wifi >= 2.4 %>\n        와이파이: 좋아요\n        <% elsif @post.wifi >= 1.45 %>\n        와이파이: 그냥 그래요\n        <% else %>\n        와이파이: 나빠요\n        <% end %>\n        <br>\n        <% if @post.table >= 2.4 %>\n        좌석·테이블: 좋아요\n        <% elsif @post.table >= 1.45 %>\n        좌석·테이블: 그냥 그래요\n        <% else %>\n        좌석·테이블: 나빠요\n        <% end %>\n        <br>\n        <% if @post.jam >= 2.4 %>\n        혼잡도: 좋아요\n        <% elsif @post.jam >= 1.45 %>\n        혼잡도: 그냥 그래요\n        <% else %>\n        혼잡도: 나빠요\n        <% end %>\n        <br>\n        <% if @post.rest >= 2.4 %>\n        화장실: 좋아요\n        <% elsif @post.rest >= 1.45 %>\n        화장실: 그냥 그래요\n        <% else %>\n        화장실: 나빠요\n        <% end %>\n        <br>\n        음악장르:\n        <br><br>\n        꿀tip: <%= @post.tip %>\n        \n        <br><br>\n        <%= render 'like' %>\n        \n        <br><hr>\n        \n      <% @post.comments.each do |comment| %>\n      <div class=\"card\">\n        <h6 class=\"card-header\">\n          <%= comment.user.email %>\n          <%#= link_to fa_icon('trash'), comment_path(comment),\n          method: :delete, data: {confirm:'댓글을 삭제하시겠습니까?'} %>\n        </h6>\n      </div class=\"card-body\">\n        <p class=\"card-text\"><%= comment.content %>\n        <%= time_ago_in_words(comment.created_at) %></p>\n      <% end %>    \n\n   \n\n</div>\n</div>\n  \n     \n<% comments_user = [] %>\n<% @post.comments.each do |comment| %>\n  <% comments_user.push(comment.user) %>\n<% end %>\n<% if user_signed_in? %>\n<% unless comments_user.include?(current_user) %>\n   <div id=\"accordion\" >\n    <div class=\"card\">\n      <div class=\"card-header\" id=\"headingOne\" style=\"align: center;\">\n        <h5 class=\"mb-0\">\n          <button class=\"btn btn-link\" data-toggle=\"collapse\" data-target=\"#collapseOne\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\n        \n            \n            <textarea id = \"comment\" type=\"text\" rows = \"1\" cols=\"61\" placeholder=\"평을 남겨주세요(평은 한번 작성하면 수정 및 삭제가 불가능합니다).\" style=\"align: center;\" onkeyup=\"auto_grow(this)\"></textarea>\n            \n        </h5>\n      </div>\n        \n      \n        <div id=\"collapseOne\" class=\"collapse\" aria-labelledby=\"headingOne\" data-parent=\"#accordion\">\n          <div class=\"card-body\">\n            <p>와이파이</p>\n\n              <form id = \"comment_form\" action=\"/comments\" method=\"POST\" style=\"align: center;\" >\n              <input name='authenticity_token' value='<%= form_authenticity_token %>' type='hidden'>  \n              <input type='hidden' name='post_id' value='<%= @post.id %>'>\n              <input id = \"real_comment\"  type = \"hidden\" name='content'>\n              \n              \n              <input  type=\"radio\" name = \"score_w\" value = 'one'>나빠요\n              <input  type=\"radio\" name = \"score_w\" value = 'two'>그냥 그래요\n              <input  type=\"radio\" name = \"score_w\" value = 'three'>좋아요\n              \n              \n              <hr>\n              <p>좌석·테이블</p>\n              <input type=\"radio\" name =\"score_t\" value = 'one'>나빠요\n              <input type=\"radio\" name = \"score_t\" value = 'two'>그냥 그래요\n              <input type=\"radio\" name = \"score_t\" value = 'three'>좋아요\n              <hr>\n              <p>혼잡도</p>\n              <input type=\"radio\" name =\"score_j\" value = 'one'>혼잡해요\n              <input type=\"radio\" name = \"score_j\" value = 'two'>그냥 그래요\n              <input type=\"radio\" name = \"score_j\" value = 'three'>한적해요\n              <hr>\n              <p>화장실</p>\n              <input type=\"radio\" name =\"score_r\" value = 'one'>나빠요\n              <input type=\"radio\" name = \"score_r\" value = 'two'>그냥 그래요\n              <input type=\"radio\" name = \"score_r\" value = 'three'>좋아요\n              <hr>\n              <p><%= @post.title %>는...(복수선택 가능)</p>\n              <input type=\"checkbox\" name = \"hash[]\" value = \"teamplay\">팀플하기 좋아요.<br>\n              <input type=\"checkbox\" name = \"hash[]\" value = \"window\">창가에서 공부하기 좋아요.<br>\n              <input type=\"checkbox\" name = \"hash[]\" value = \"laptop\">노트북하기 좋아요.<br>\n              <input type=\"checkbox\" name = \"hash[]\" value = \"wall\">칸막이 좌석이 있어요.<br>\n              <input type=\"checkbox\" name = \"hash[]\" value = \"smoke\">흡연실이 있어요.<br>\n              <input type=\"checkbox\" name = \"hash[]\" value = \"none\">해당사항 없어요.<br>\n          </div>\n          \n                      \n            </form>\n            \n          &nbsp; &nbsp; <button id = \"chking\">작성</button>\n        </div>\n      </div>\n    </div>\n  \n<% end %>\n<% end %>  \n  \n  \n \n<!--End of container-->\n\n\n\n\n \n      \n      \n    <%= render '/layouts/footer' %>\n\n<script>\n\nfunction auto_grow(element) {\n    element.style.height = \"5px\";\n    element.style.height = (element.scrollHeight)+\"px\";\n}\n\n\n\n\n\n\n\n    \n     $(function(){\n         \n      $(\"#chking\").click(function(){\n        \n        \n     if($('#comment').val() != \"평을 남겨주세요(평은 한 개만 작성할 수 있습니다.)\" && $('#comment').val() && $('#comment').val() !=\"\") {\n          var comment = $('#comment').val();\n          $('#real_comment').val(comment);\n     }else{\n       alert('댓글을 남겨주세요.');\n       return false;\n     }\n     \n     if($(\"#comment\").val().length > 300){\n       alert('댓글은 최대 300자 제한입니다. 현재 ' + $('#comment').val().length + '자');\n       return false;\n     }\n        \n        if($('input[name=\"score_w\"]:checked').length === 0) {\n       alert('와이파이를 체크해주세요.');\n       return false;\n    }\n      \n        if($('input[name=\"score_t\"]:checked').length === 0) {\n       alert('테이블을 체크해주세요.');\n       return false;\n    }\n      \n       if($('input[name=\"score_j\"]:checked').length === 0) {\n       alert('혼잡도를 체크해주세요.');\n       return false;\n    } \n       if($('input[name=\"score_r\"]:checked').length === 0) {\n       alert('화장실을 체크해주세요.');\n       return false;\n    } \n     \n     if($('input[name=\"hash[]\"]:checked').length === 0) {\n     alert('해당 카페의 정보를 체크해주세요');\n    }\n     \n      $(\"#comment_form\").submit();\n    });\n\t});\n   \n   \n\n   \n    \n    \n      \n  \n  \n\n</script>\n\n    <!--아래 script 두개 이미지 슬라이드 적용-->\n    <!-- Bootstrap core JavaScript -->\n    <script src=\"https://blackrockdigital.github.io/startbootstrap-half-slider/vendor/jquery/jquery.min.js\"></script>\n    <script src=\"https://blackrockdigital.github.io/startbootstrap-half-slider/vendor/bootstrap/js/bootstrap.bundle.min.js\"></script>\n    \n  \n  \n  </body>\n\n</html>","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[{"start":{"row":315,"column":12},"end":{"row":391,"column":7},"placeholder":"..."}],"scrolltop":2501.734375,"scrollleft":0,"selection":{"start":{"row":170,"column":15},"end":{"row":170,"column":15},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":true,"wrapToView":true},"firstLineState":{"row":193,"state":"start","mode":"ace/mode/html_ruby"}},"timestamp":1535638873000}